# Сравнение работы алгоритмов управления виртуальной памятью

Программа позволяет тестировать различные алгоритмы управления виртуальной памятью, в частности, строить *графики* их оптимальности в зависимости от числа запросов.

## Запуск программы
 
Чтобы запустить программу, надо ввести в консоли следующую команду (предполагается, что вы находитесь в корне проекта):

  `gradle run --args='[params]'`, где `[params]` - это параметры запуска
 
### Тестирование
   `gradle test` для Unit-тестов
   
   `gradle intTest` для интеграционных тестов
  
## Параметры командной строки

В качестве параметров программа принимает имена файлов и директорий, содержащих входные данные для алгоритмов, а также [дополнительные параметры](#дополнительные-параметры)

Вы можете указать несколько файлов и/или директорий.

Программа запустит алгоритмы на всех указанных файлах и всех файлах, содержащихся в указанных директориях

Пример запуска:
  `gradle run --args='data/samples/inp001.txt data/mytests'` - программа запустит алгоритмы на тестах из файла `data/samples/inp001.txt` а также на тестах из всех файлов в папке `data/mytests`
  
## Формат входных файлов:

Входной файл должен состоять из одного или более теста. Каждый тест должен быть записан в виде **ровно двух строк**:
* первая строка должна состоять из трех чисел `MaxPage`, `MemSize` и `NumOfCases`, обозначающих число страниц в адресном пространстве, число кадров оперативной памяти и число обращений, соответственно.
* вторая строка должна начинаться с одной буквы `m` (manual), `r` (random) или `g` (gaussian).

Эти буквы обозначают:
* `m` - тест "ручной", тогда на той же строке необходимо ввести `NumOfCases` чисел от `1` до `MaxPage`, разделенных пробелами и/или запятыми - порядок обращений к страницам. **При этом число `NumOfCases` в предыдущей строке может быть опущено**, тогда здесь можно ввести сколько угодно запросов и программа проделает их все.
* `r` - тест будет сгенерирован автоматически из `NumOfCases` запросов, страницы будут выбираться случайно и равновероятно, больше в строке ничего писать не требуется
* `g` - то же самое, что `r`, но страницы будут выбираться не равновероятно, а с использованием нормального распределения - какие-то чаще, какие-то реже.

Тесты могут быть разделены пустыми строками.

**ВАЖНО!** По умолчанию, программа считывает из файла строки по две и объединяет пару строк в один тест. Поэтому если добавить "лишнюю" строку в середину файла, все может "поехать" и половина тестов не распознается. Чтобы себя обезопасить, перед некоторыми тестами можно добавить строку, начинающуюся с символа `#`. Такие строки будут игнорироваться и будут явно указывать, что следующая строка будет началом нового теста. (Крайне рекомендуется так делать, если у вас много тестов в одном файле)

### Пример входного файла из 4-х тестов:

    100 20 1000
    r
    100 20 1000
    g
    
    5 3
    m 1 2 3 4 5 5 4 3 2 1
    # The same test
    5 3 10
    m 1 2 3 4 5 5 4 3 2 1
    
(Обратите внимание на использование `#`, описанное в предыдущем абзаце; последние два теста одинаковы, отличаются лишь формой записи)
## Результат работы программы:

Для каждого входного файла `name` подробная информация, содержащая вывод каждого алгоритма на каждом тесте, будет выведена в файл `name.out` в одной директории с ним (или в директории, указанной в `-output-prefix`, если такая была)

Дополнительно, "сводка" работы алгоритмов на каждом тесте будет выведена в стандартный поток вывода: для каждого теста и каждого алгоритма будут выведены следующие величины:
* `Algo` - название алгоритма
* `Bad Queries` - число раз, которые алгоритму пришлось замещать страницы
* `Rel. Score` - процент запросов, в которых требуемая страница уже была в памяти (от общего числа запросов)
* `Norm. Score` - отношение `Rel. Score` алгоритма к максимально возможному `Rel. Score`

## Дополнительные параметры:
* `-output-prefix=DIR`, где DIR - название папки (должна быть создана заранее). Все выходные файлы будут помещены не в директории входных (как по умолчанию), а в папку DIR.
* `--show-chart` - если указана эта опция, для каждого теста программа будет строить графики `Rel. Score` алгоритмов от числа запросов. **ОСТОРОЖНО**, график будет построен в отдельном окне для *каждого теста*, так что не стоит включать эту опцию, если вы передали много тестов.